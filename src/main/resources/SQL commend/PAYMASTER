CREATE TABLE PAYMASTER_AUD
(
    EVENT_ID   INT(11)  NOT NULL AUTO_INCREMENT,
    EVENT_DATE DATETIME NOT NULL,
    EVENT_TYPE VARCHAR(10) DEFAULT NULL,
    OLD_PAYMASTER_ID INT(11),
    NEW_PAYMASTER_ID INT(11),
    OLD_NAME VARCHAR(20),
    NEW_NAME VARCHAR(20),

    PRIMARY KEY (EVENT_ID)
);


DELIMITER $$

CREATE TRIGGER PAYMASTER_INSERT AFTER INSERT ON PAYMASTER
    FOR EACH ROW
BEGIN
    INSERT INTO PAYMASTER_AUD (EVENT_DATE ,EVENT_TYPE,NEW_PAYMASTER_ID,NEW_NAME)
        VALUE(CURTIME(), 'INSERT', NEW.ID, NEW.NAME);
END $$

DELIMITER ;

DELIMITER $$

CREATE TRIGGER PAYMASTER_DELETE AFTER DELETE ON PAYMASTER
    FOR EACH ROW
BEGIN
    INSERT INTO PAYMASTER_AUD (EVENT_DATE ,EVENT_TYPE,OLD_PAYMASTER_ID,OLD_NAME)
        VALUE(CURTIME(), 'DELETE', OLD.ID, OLD.NAME);
END $$

DELIMITER ;


DELIMITER $$

CREATE TRIGGER PAYMASTER_UPDATE AFTER UPDATE ON PAYMASTER
    FOR EACH ROW
BEGIN
    INSERT INTO PAYMASTER_AUD (EVENT_DATE ,EVENT_TYPE, NEW_PAYMASTER_ID,NEW_NAME ,OLD_PAYMASTER_ID,OLD_NAME)
        VALUE(CURTIME(), 'UPDATE',NEW.ID, NEW.NAME, OLD.ID, OLD.NAME);
END $$

DELIMITER ;