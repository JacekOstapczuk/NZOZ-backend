CREATE TABLE PHYSICIAN_AUD
(
    EVENT_ID   INT(11)  NOT NULL AUTO_INCREMENT,
    EVENT_DATE DATETIME NOT NULL,
    EVENT_TYPE VARCHAR(10) DEFAULT NULL,
    OLD_PHYSICIAN_ID INT(11),
    NEW_PHYSICIAN_ID INT(11),
    OLD_NAME VARCHAR(20),
    NEW_NAME VARCHAR(20),
    OLD_SURNAME VARCHAR(20),
    NEW_SURNAME VARCHAR(20),
    OLD_PWZ INT(11),
    NEW_PWZ INT(11),

    PRIMARY KEY (EVENT_ID)
);

DELIMITER $$

CREATE TRIGGER PHYSICIAN_INSERT AFTER INSERT ON PHYSICIANS
    FOR EACH ROW
BEGIN
    INSERT INTO PHYSICIAN_AUD ( EVENT_DATE, EVENT_TYPE, NEW_PHYSICIAN_ID, NEW_NAME, NEW_SURNAME, NEW_PWZ)
        VALUE(CURTIME(), 'INSERT', NEW.ID,NEW.NAME, NEW.SURNAME, NEW.PWZ );
END $$

DELIMITER ;


DELIMITER $$

CREATE TRIGGER PHYSICIAN_DELETE AFTER DELETE ON PHYSICIANS
    FOR EACH ROW
BEGIN
    INSERT INTO PHYSICIAN_AUD ( EVENT_DATE, EVENT_TYPE, OLD_PHYSICIAN_ID, OLD_NAME, OLD_SURNAME, OLD_PWZ)
        VALUE(CURTIME(), 'DELETE', OLD.ID,OLD.NAME, OLD.SURNAME, OLD.PWZ );
END $$

DELIMITER ;


DELIMITER $$

CREATE TRIGGER PHYSICIAN_UPDATE AFTER UPDATE ON PHYSICIANS
    FOR EACH ROW
BEGIN
    INSERT INTO PHYSICIAN_AUD ( EVENT_DATE, EVENT_TYPE, NEW_PHYSICIAN_ID, NEW_NAME, NEW_SURNAME, NEW_PWZ,
                                OLD_PHYSICIAN_ID, OLD_NAME, OLD_SURNAME, OLD_PWZ)
        VALUE(CURTIME(), 'UPDATE',NEW_PHYSICIAN_ID, NEW_NAME, NEW_SURNAME, NEW_PWZ,
            OLD.ID,OLD.NAME, OLD.SURNAME, OLD.PWZ );
END $$

DELIMITER ;