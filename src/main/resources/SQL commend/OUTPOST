CREATE TABLE OUTPOST_AUD
(
    EVENT_ID   INT(11)  NOT NULL AUTO_INCREMENT,
    EVENT_DATE DATETIME NOT NULL,
    EVENT_TYPE VARCHAR(10) DEFAULT NULL,
    OLD_OUTPOST_ID INT(11),
    NEW_OUTPOST_ID INT(11),
    OLD_CITY VARCHAR(20),
    NEW_CITY VARCHAR(20),

    PRIMARY KEY (EVENT_ID)
);



DELIMITER $$

CREATE TRIGGER OUTPOST_INSERT AFTER INSERT ON OUTPOSTS
    FOR EACH ROW
BEGIN
    INSERT INTO OUTPOST_AUD (EVENT_DATE ,EVENT_TYPE,NEW_OUTPOST_ID,NEW_CITY)
        VALUE(CURTIME(), 'INSERT', NEW.ID, NEW.CITY);
END $$

DELIMITER ;



DELIMITER $$

CREATE TRIGGER OUTPOST_DELETE AFTER DELETE ON OUTPOSTS
    FOR EACH ROW
BEGIN
    INSERT INTO OUTPOST_AUD (EVENT_DATE ,EVENT_TYPE,OLD_OUTPOST_ID,OLD_CITY)
        VALUE(CURTIME(), 'DELETE', OLD.ID, OLD.CITY);
END $$

DELIMITER ;


DELIMITER $$

CREATE TRIGGER OUTPOST_UPDATE AFTER UPDATE ON OUTPOSTS
    FOR EACH ROW
BEGIN
    INSERT INTO OUTPOST_AUD (EVENT_DATE ,EVENT_TYPE,NEW_OUTPOST_ID,NEW_CITY,OLD_OUTPOST_ID,OLD_CITY)
        VALUE(CURTIME(), 'UPDATE', NEW.ID, NEW.CITY, OLD.ID, OLD.CITY);
END $$

DELIMITER ;